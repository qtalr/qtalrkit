<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="qtalrkit">
<title>2. Reading, inspecting, and writing data • qtalrkit</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="2. Reading, inspecting, and writing data">
<meta property="og:description" content="qtalrkit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">qtalrkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/qtalrkit.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Materials</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/qtalr/qtalrkit/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>2. Reading, inspecting, and writing data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/qtalr/qtalrkit/blob/HEAD/vignettes/articles/recipe-2.Rmd" class="external-link"><code>vignettes/articles/recipe-2.Rmd</code></a></small>
      <div class="d-none name"><code>recipe-2.Rmd</code></div>
    </div>

    
    
<!--
- [ ] Add unit of observation description to dataset? Lab-2?
-->
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<!--

Purpose: Using Quarto, learners will practice reading, inspecting, and writing data using R functions and Quarto code blocks. Intermingled with the code blocks will be prose to explain the code and the output as well as citation and documentation for the data and functions used.

Description: This recipe will start by very briefly reviewing the purpose of Quarto documents and the basic structure of a Quarto document. Then, learners will be given a common scenario in data analysis: to read, to inspect, and to write data. The recipe will discuss the necessary packages and functions to accomplish these tasks including `readr` and `dplyr`. The recipe will also refresh and expand on the elements of code blocks such as the `label`, `echo`, `message`, and `include` options.

Approach: The approach will be to use a Quarto document to demonstrate the use of R functions and Quarto code blocks to read, inspect, and write data. A sample dataset will be used to demonstrate the use of the `readr` package to read data into R with `read_*()`. The `dplyr` package will be used to inspect and transform (subset) the data, including the `select()`, `slice()`, `filter()`, and `arrange()` functions. Finally, the `readr` package will be used to write the data to a file `write_csv()`. The recipe will also demonstrate the use of the native R pipe operator `|>` to chain functions together in to more readable code.

Prerequisites: It will be assumed that learners can create a Quarto document in RStudio, have a basic understanding of R and using R in RStudio editor and console, and have a basic understanding of vectors and data frames and assigning objects to variables.
-->
<p>This Recipes guides you through the process of reading, inspecting, and writing data using R packages and functions in a Quarto environment. You'll learn how to effectively combine code and narrative to create a reproducible document that can be shared with others.</p>
<p>We will cover the following topics:</p>
<ul>
<li>Loading packages into an R session</li>
<li>Reading data into R with <code>read_*()</code> functions</li>
<li>Inspecting data with <code>dplyr</code> functions</li>
<li>Writing data to a file with <code>write_*()</code> functions</li>
</ul>
<p>In Lab 2, you will be able to apply these skills to and employ your Quarto skills to create a well-documented and reproducible document.</p>
</div>
<div class="section level2">
<h2 id="concepts-and-strategies">Concepts and strategies<a class="anchor" aria-label="anchor" href="#concepts-and-strategies"></a>
</h2>
<div class="section level3">
<h3 id="quarto-documents-and-code-blocks">Quarto documents and code blocks<a class="anchor" aria-label="anchor" href="#quarto-documents-and-code-blocks"></a>
</h3>
<p>Ask you will remember from Lab 0 and 1, Quarto documents can combine prose and code. The prose is written in Markdown and the code is written in R<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt; Code block can be written in other programming languages as well such as Python, Bash, &lt;em&gt;etc.&lt;/em&gt;&lt;/p&gt;"><sup>1</sup></a>. The code is contained in code blocks, which are opened by three backticks (<code>`</code>), the name of the programming language, <code>r</code>, in curly braces <code>{r}</code> and three backticks (<code>`</code>) to close the block. For example, the following minimal Quarto document contains an R code block:</p>
<pre><code>---
title: My Quarto Document
format: pdf
---

# Goals

This script ...

```{r}
#| label: code-block-name

# R code goes here
```

As you can see in the code block, the ...
</code></pre>
<p>Code blocks have various options that can be added by using key-value pairs that are prefixed with <code>#|</code>. Some common key-value pairs we will use in this Recipe are:</p>
<ul>
<li>
<code>label</code>: A unique name for the code block. This is used to reference the code block.</li>
<li>
<code>echo</code>: A boolean value (<code>true</code> or <code>false</code>) that determines whether the code is displayed in the output document.</li>
<li>
<code>include</code>: A boolean value (<code>true</code> or <code>false</code>) that determines whether the output of the code is displayed in the output document.</li>
<li>
<code>message</code>: A boolean value (<code>true</code> or <code>false</code>) that determines whether the messages from the code are displayed in the output document.</li>
</ul>
</div>
<div class="section level3">
<h3 id="setting-up-the-environment">Setting up the environment<a class="anchor" aria-label="anchor" href="#setting-up-the-environment"></a>
</h3>
<p>Before we can read, inspect, and write data, we need to load the packages that contain the functions we will use. We will use the <code>readr</code> package to read data into R and write data to disk and the <code>dplyr</code> package to inspect and transform (subset) the data.</p>
<p>There are a few ways to load packages into an R session. The most common way is to use the <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> function. The <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> function loads a package into the R session and stops the script if the package is not available on the current computing environment.</p>
<p>For example, the following code block loads the <code>readr</code> and <code>dplyr</code> packages into the R session:</p>
<pre><code>```{r}
#| label: load-packages

# Load packages
library(readr) # for reading and writing data
library(dplyr) # for inspecting and transforming data
```</code></pre>
<p>This code block assumes that the <code>readr</code> and <code>dplyr</code> packages are installed on the current computing environment. If the packages are not installed, the code block will stop and display an error message, such as:</p>
<pre class="plain"><code>Error in library(readr) : there is no package called ‘readr’</code></pre>
<p>This error can be addressed by installing the missing package with <code>install.packages("readr")</code> and then re-running the code block. This is not ideal for reproducibility, however, because the code block will stop if the package is not installed. We will consider a more reproducible approach later in the course.</p>
<div class="callout">
<p><strong><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0H133.9c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0H487.4C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"></path></svg> Dive deeper</strong></p>
<p>If you interested in learning about safeguarding package loading in a reproducible way, see the <code>renv</code> package. The <code>renv</code> package is a project-oriented workflow to create a reproducible environment for R projects. For more information, see the <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link">renv documentation</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="understanding-the-data">Understanding the data<a class="anchor" aria-label="anchor" href="#understanding-the-data"></a>
</h3>
<p>Now that we have our environment set up, we can read the data into R. But before we do, we should make sure that we understand the data by looking at the data documentation.</p>
<p>The dataset that we will read into our R session based on the Brown Corpus <span class="citation">(<a href="#ref-Francis1961">Francis and Kuçera 1961</a>)</span>. I've created a data origin file that contains the data documentation for the Brown Corpus, as we can see in Table <a href="#tab:brow-passives-do">1</a>.</p>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:brow-passives-do">Table 1: </span>Data origin file for the Brown Corpus.
</caption>
<thead><tr>
<th style="text-align:left;">
attribute
</th>
<th style="text-align:left;">
description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Resource name
</td>
<td style="text-align:left;">
Brown Corpus
</td>
</tr>
<tr>
<td style="text-align:left;">
Data source
</td>
<td style="text-align:left;">
<a href="http://korpus.uib.no/icame/brown/bcm.html" class="external-link uri">http://korpus.uib.no/icame/brown/bcm.html</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Data sampling frame
</td>
<td style="text-align:left;">
Edited American English prose from various genres, published in the United States during the calendar year 1961.
</td>
</tr>
<tr>
<td style="text-align:left;">
Data collection date(s)
</td>
<td style="text-align:left;">
Originally published in 1964, revised in 1971 and 1979.
</td>
</tr>
<tr>
<td style="text-align:left;">
Data format
</td>
<td style="text-align:left;">
Multiple formats including Form A (original), Form B (stripped version), Form C (tagged version), Bergen Forms I and II, and Brown MARC Form.
</td>
</tr>
<tr>
<td style="text-align:left;">
Data schema
</td>
<td style="text-align:left;">
500 samples of approximately 2000 words each, covering a wide range of genres and styles. Includes coding for major and minor headings, special types (italics, bold, etc.), abbreviations, symbols, and other textual features.
</td>
</tr>
<tr>
<td style="text-align:left;">
License
</td>
<td style="text-align:left;">
Use restricted for scholarly research in linguistics, stylistics, and other disciplines. Specific copyright restrictions detailed in the manual.
</td>
</tr>
<tr>
<td style="text-align:left;">
Attribution
</td>
<td style="text-align:left;">
W. Nelson Francis and Henry Kucera, Brown University, 1964, revised 1971 and 1979.
</td>
</tr>
</tbody>
</table>
<p>This data origin file provides an overview of the original data source. In this case, the dataset we will read into R is a subset of the Brown Corpus which is an aggregate of the use of passive voice. This data was developed by the authors of the <code>corpora</code> package <span class="citation">(<a href="#ref-R-corpora">Evert 2023</a>)</span>. I've exported the data to a CSV file, which we will read into R.</p>
<p>The data dictionary which describes the dataset we will read appears in Table <a href="#tab:brow-passives-dd">2</a>.</p>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:brow-passives-dd">Table 2: </span>Data dictionary file for the Brown Corpus.
</caption>
<thead><tr>
<th style="text-align:left;">
variable
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
variable_type
</th>
<th style="text-align:left;">
description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
cat
</td>
<td style="text-align:left;">
Category
</td>
<td style="text-align:left;">
categorical
</td>
<td style="text-align:left;">
Genre categories represented by letters
</td>
</tr>
<tr>
<td style="text-align:left;">
passive
</td>
<td style="text-align:left;">
Passive
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
Number of passive verb phrases in the genre
</td>
</tr>
<tr>
<td style="text-align:left;">
n_w
</td>
<td style="text-align:left;">
Number of words
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
Number of words in the genre
</td>
</tr>
<tr>
<td style="text-align:left;">
n_s
</td>
<td style="text-align:left;">
Number of sentences
</td>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
Number of sentences in the genre
</td>
</tr>
<tr>
<td style="text-align:left;">
name
</td>
<td style="text-align:left;">
Genre
</td>
<td style="text-align:left;">
categorical
</td>
<td style="text-align:left;">
Genre name
</td>
</tr>
</tbody>
</table>
<p>With this information, we are now in a position to read and inspect the dataset.</p>
</div>
<div class="section level3">
<h3 id="reading-data-into-r-with-readr">Reading data into R with <code>readr</code><a class="anchor" aria-label="anchor" href="#reading-data-into-r-with-readr"></a>
</h3>
<!--
- Use the `corpora::BrownLOBpassives` dataset
- Write the data to different file formats
  - `write_csv()`
  - `write_tsv()`
  - `write_delim()`
-->
<p>We've now prepared our Quarto document by loading the packages we will use and and we have reviewed the data documentation so that we understand the data we will read into R. We are now ready to read the data into R.</p>
<p>R provides a number of functions to read data of many types in R. We will explore many types of data and datasets in this course. For now, we will focus on reading rectangular data into R. Rectangular data is data that is organized in rows and columns, such as a spreadsheet.</p>
<p>One of the most common file formats for rectangular data is the comma-separated values (CSV) file. CSV files are text files in which lines represent rows and commas separate columns of data. For example, the sample CSV file snippet below contains three rows and three columns of data:</p>
<pre class="csv"><code>"word","frequency","part_of_speech"
"the",69971,"article"
"of",36412,"preposition"
"and",28853,"conjunction"</code></pre>
<p>A CSV file is a type of delimited file, which means that the data is separated by a delimiter. In the case of a CSV file, the delimiter is a comma. Other types of delimited files use different delimiters, such as tab-separated values (TSV) files which use a tab character as the delimiter, or even a pipe (<code>|</code>) or semicolon (<code>;</code>).</p>
<p>The <code>readr</code> package provides functions to read rectangular data into R. The <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv()</a></code> function reads CSV files, the <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_tsv()</a></code> function reads TSV files, and the <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_delim()</a></code> function reads other types of delimited files.</p>
<p>Let's use the <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv()</a></code> function to read the <code>brown_passives_curated.csv</code> file into R. To do this we will use the <code>file =</code> argument to specify the path to the file. Now, the file "path" is the location of the file on the computer. We can specify this path in two ways:</p>
<ul>
<li>Relative path: The relative path is the path to the file relative to the current working directory. The current working directory is the directory in which the R session is running.</li>
<li>Absolute path: The absolute path is the path to the file from the root directory of the computer.</li>
</ul>
<p>For most purpose, the relative path is the better option because it is more portable. For example, if you share your code with someone else, they may have a different absolute path to the file. However, they will likely have the same relative path to the file.</p>
<p>Let's say that the directory structure of our project is as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">project/</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">├──</span> data/</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="ex">│</span>   ├── original/</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="ex">│</span>   │   └── brown_passives_do.csv</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="ex">│</span>   └── derived/</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="ex">│</span>       └── brown_passives_curated.csv</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="ex">└──</span> scripts/</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="ex">└──</span> reading-inspecting-writing.qmd</span></code></pre></div>
<p>In this case, the relative path from <code>reading-inspecting-writing.qmd</code> to the <code>brown_passives_curated.csv</code> file is <code>../data/derived/brown_passives_curated.csv</code>. The <code>..</code> means "go up one directory" and the rest of the path is the path to the file from the <code>project/</code> directory.</p>
<p>With this in mind, we can read the <code>brown_passives_curated.csv</code> file into R with the following code block:</p>
<pre><code>```{r}
#| label: read-dataset-brown-passives-curated

# Read the dataset
brown_passives_df &lt;-
  read_csv(file = "../data/derived/brown_passives_curated.csv")
```</code></pre>
<p>Running the above code chunk in our Quarto document will read the data into R and assign it to the <code>brown_passives_df</code> variable. It will also show the code used to read the data into R. Furthermore, so functions will display messages in the output. For example, the <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv()</a></code> function will display a message that various parsing options were used to read the data into R, as seen below:</p>
<pre><code><span><span class="co">## <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">15</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">5</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">## <span style="color: #BB0000;">chr</span> (2): cat, name</span></span>
<span><span class="co">## <span style="color: #00BB00;">dbl</span> (3): passive, n_w, n_s</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre>
<p>This information can be helpful in an interactive session, as <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv()</a></code> tells us the dimensions of the data and the data types of each column.
But this output is not necessary, and is unnecessarily verbose in a reproducible document.</p>
<p>We can hide any messages produced by a function by using the <code>message = false</code> key-value pair in the code block. For example, the following code block will read the data into R and assign it to the <code>brown_passives_df</code> variable without displaying any messages:</p>
<pre><code>```{r}
#| label: read-dataset-brown-passives-curated
#| message: false

# Read the dataset
brown_passives_df &lt;-
  read_csv(file = "../data/derived/brown_passives_curated.csv")
```</code></pre>
<p>No messages are displayed in the document output.</p>
</div>
<div class="section level3">
<h3 id="inspecting-data-with-dplyr">Inspecting data with <code>dplyr</code><a class="anchor" aria-label="anchor" href="#inspecting-data-with-dplyr"></a>
</h3>
<p>The objective of this section is to demonstrate how to inspect and transform (subset) data using the <code>dplyr</code> package. We will use the <code>dplyr</code> package to inspect the data we read into R in the previous section.</p>
<p>Reading a CSV file into R will create a data frame object. Thus, I assigned the result to <code>brown_passives_df</code>. The <code>df</code> suffix is a common naming convention for rectangular data frames. It is good practice to use a consistent naming convention for objects in your code. This makes it easier to understand the code and to avoid errors.</p>
<p>Let's do get an overview of the data by using the <code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code> function from the <code>dplyr</code> package. The <code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code> function displays the dimensions of the data frame and the data types of each column.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Preview</span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">brown_passives_df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 15</span></span>
<span><span class="co">## Columns: 5</span></span>
<span><span class="co">## $ cat     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "A", "B", "C", "D", "E", "F", "G", "H", "J", "K", "L", "M", "N…</span></span>
<span><span class="co">## $ passive <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 892, 543, 283, 351, 853, 1034, 1460, 837, 2423, 352, 265, 104,…</span></span>
<span><span class="co">## $ n_w     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 101196, 61535, 40749, 39029, 82010, 110363, 173017, 69446, 181…</span></span>
<span><span class="co">## $ n_s     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3684, 2399, 1459, 1372, 3286, 4387, 6537, 2012, 6311, 3983, 36…</span></span>
<span><span class="co">## $ name    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "press reportage", "press editorial", "press reviews", "religi…</span></span></code></pre>
<p>If we want a more, tabular-like view of the data, we can simply print the data frame to the console. It's worth mentioning, that all <code>readr</code> functions return tibbles, so we gain the benefits of tibbles when we read data into R with <code>readr</code> functions, one of which is that we do not have to worry that printing a data frame to the console, or our document, will print all of the data.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Print the data frame</span></span>
<span><span class="va">brown_passives_df</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 15 × 5</span></span></span>
<span><span class="co">##    cat   passive    n_w   n_s name            </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> A         892 <span style="text-decoration: underline;">101</span>196  <span style="text-decoration: underline;">3</span>684 press reportage </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> B         543  <span style="text-decoration: underline;">61</span>535  <span style="text-decoration: underline;">2</span>399 press editorial </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> C         283  <span style="text-decoration: underline;">40</span>749  <span style="text-decoration: underline;">1</span>459 press reviews   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> D         351  <span style="text-decoration: underline;">39</span>029  <span style="text-decoration: underline;">1</span>372 religion        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> E         853  <span style="text-decoration: underline;">82</span>010  <span style="text-decoration: underline;">3</span>286 skills / hobbies</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> F        <span style="text-decoration: underline;">1</span>034 <span style="text-decoration: underline;">110</span>363  <span style="text-decoration: underline;">4</span>387 popular lore    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> G        <span style="text-decoration: underline;">1</span>460 <span style="text-decoration: underline;">173</span>017  <span style="text-decoration: underline;">6</span>537 belles lettres  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> H         837  <span style="text-decoration: underline;">69</span>446  <span style="text-decoration: underline;">2</span>012 miscellaneous   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> J        <span style="text-decoration: underline;">2</span>423 <span style="text-decoration: underline;">181</span>426  <span style="text-decoration: underline;">6</span>311 learned         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> K         352  <span style="text-decoration: underline;">68</span>599  <span style="text-decoration: underline;">3</span>983 general fiction </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more rows</span></span></span></code></pre>
<p>By default, printing tibbles will return the first 10 rows and all columns, unless the columns are too numerous to display width-wise.</p>
<p><code>dplyr</code> also provides a set of <code>slice_*()</code> functions which allow us to display the data in a tabular fashion, with some additional options. There are three <code>slice_*()</code> functions we will cover here:</p>
<ul>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head()</a></code>: Select the first <code>n</code> rows of the data frame.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail()</a></code>: Select the last <code>n</code> rows of the data frame.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code>: Select a random sample of <code>n</code> rows from the data frame.</li>
</ul>
<p>For example, the following code block will select the first 5 rows of the data frame:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the first 5 rows</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span><span class="va">brown_passives_df</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   cat   passive    n_w   n_s name            </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> A         892 <span style="text-decoration: underline;">101</span>196  <span style="text-decoration: underline;">3</span>684 press reportage </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> B         543  <span style="text-decoration: underline;">61</span>535  <span style="text-decoration: underline;">2</span>399 press editorial </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> C         283  <span style="text-decoration: underline;">40</span>749  <span style="text-decoration: underline;">1</span>459 press reviews   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> D         351  <span style="text-decoration: underline;">39</span>029  <span style="text-decoration: underline;">1</span>372 religion        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> E         853  <span style="text-decoration: underline;">82</span>010  <span style="text-decoration: underline;">3</span>286 skills / hobbies</span></span></code></pre>
<p>We can also select the last 5 rows of the data frame with the <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail()</a></code> function:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the last 5 rows</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span><span class="va">brown_passives_df</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   cat   passive   n_w   n_s name           </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> L         265 <span style="text-decoration: underline;">57</span>624  <span style="text-decoration: underline;">3</span>673 detective      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> M         104 <span style="text-decoration: underline;">14</span>433   873 science fiction</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> N         290 <span style="text-decoration: underline;">69</span>909  <span style="text-decoration: underline;">4</span>438 adventure      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> P         290 <span style="text-decoration: underline;">70</span>476  <span style="text-decoration: underline;">4</span>187 romance        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> R         146 <span style="text-decoration: underline;">21</span>757   975 humour</span></span></code></pre>
<p>Finally, we can select a random sample of 5 rows from the data frame with the <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code> function:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select a random sample of 5 rows</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span><span class="va">brown_passives_df</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   cat   passive    n_w   n_s name            </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> J        <span style="text-decoration: underline;">2</span>423 <span style="text-decoration: underline;">181</span>426  <span style="text-decoration: underline;">6</span>311 learned         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> H         837  <span style="text-decoration: underline;">69</span>446  <span style="text-decoration: underline;">2</span>012 miscellaneous   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> G        <span style="text-decoration: underline;">1</span>460 <span style="text-decoration: underline;">173</span>017  <span style="text-decoration: underline;">6</span>537 belles lettres  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> E         853  <span style="text-decoration: underline;">82</span>010  <span style="text-decoration: underline;">3</span>286 skills / hobbies</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> K         352  <span style="text-decoration: underline;">68</span>599  <span style="text-decoration: underline;">3</span>983 general fiction</span></span></code></pre>
<p>These functions can be helpful to get a sense of the data in different ways. In combination with <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> function, we can also sort the data frame by a column or columns and then select the first or last rows.</p>
<p>For example, the following code block will sort the data frame by the <code>passive</code> column in ascending order and then select the first 5 rows:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sort by the `passive` column and select the first 5 rows</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">brown_passives_df</span>, <span class="va">passive</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   cat   passive   n_w   n_s name           </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> M         104 <span style="text-decoration: underline;">14</span>433   873 science fiction</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> R         146 <span style="text-decoration: underline;">21</span>757   975 humour         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> L         265 <span style="text-decoration: underline;">57</span>624  <span style="text-decoration: underline;">3</span>673 detective      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> C         283 <span style="text-decoration: underline;">40</span>749  <span style="text-decoration: underline;">1</span>459 press reviews  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> N         290 <span style="text-decoration: underline;">69</span>909  <span style="text-decoration: underline;">4</span>438 adventure</span></span></code></pre>
<p>If we want to sort be descending order, we can surround the column name with <code><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc()</a></code>, <code>arrange(desc(passive))</code>.</p>
<p>Now, the previous code block does what we want, but it is not very readable. Enter the pipe operator. The pipe operator <code>|&gt;</code> is an operator which allows us to chain the output of one function to the input of another function. This allows us to write more readable code.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sort by the `passive` column and select the first 5 rows</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">passive</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">##   cat   passive   n_w   n_s name           </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> M         104 <span style="text-decoration: underline;">14</span>433   873 science fiction</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> R         146 <span style="text-decoration: underline;">21</span>757   975 humour         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> L         265 <span style="text-decoration: underline;">57</span>624  <span style="text-decoration: underline;">3</span>673 detective      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> C         283 <span style="text-decoration: underline;">40</span>749  <span style="text-decoration: underline;">1</span>459 press reviews  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> N         290 <span style="text-decoration: underline;">69</span>909  <span style="text-decoration: underline;">4</span>438 adventure</span></span></code></pre>
<p>The result is the same but the code makes more sense. We can read the code from left to right, top to bottom, which is the order in which the functions are executed.</p>
<div class="callout">
<p><strong><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0H133.9c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0H487.4C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"></path></svg> Dive deeper</strong></p>
<p>The native R pipe <code>|&gt;</code> was introduced in R 4.1.0. If you are using an earlier version of R, you can use the <code>magrittr</code> package to load the pipe operator <code>%&gt;%</code>.</p>
<p>There are certain advantages to using the <code>magrittr</code> pipe operator, including the ability to use the pipe operator to pass arguments to functions with placeholders. For more information, see the <a href="https://magrittr.tidyverse.org/" class="external-link">magrittr documentation</a>.</p>
</div>
<p>In addition to being more legible, using the pipe with each function on its own line allows us to add comments to each line of code. For example, the following code block is the same as the previous code block, but with comments added to each line:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sort by the passive column and select the first 5 rows</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span> <span class="co"># Pass the data frame to the next function</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">passive</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># Sort the data frame by the passive column</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># Select the first 5 rows</span></span></code></pre></div>
<p>This is a good practice to follow when writing code. It makes the code more readable and easier to understand for others and for your future self!</p>
</div>
<div class="section level3">
<h3 id="subsetting-data-with-dplyr">Subsetting data with <code>dplyr</code><a class="anchor" aria-label="anchor" href="#subsetting-data-with-dplyr"></a>
</h3>
<p>Now that we have a sense of the data, we can subset the data to create a variations of our original data frame. We can subset the data frame by selecting columns and/ or rows.</p>
<p>In the <a href="https://github.com/qtalr/lessons" class="external-link">R lesson</a> "Packages and Functions", we saw that base R provides the bracket (<code>[]</code>) operator to subset data frames. The <code>dplyr</code> package provides functions to subset data frames which can be more readable and easier to use.</p>
<p>Let's first look a selecting columns. The <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> function allows us to select columns by name. For example, the following code block will select the <code>passive</code> and <code>n_w</code> columns from the data frame:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the `passive` and `n_w` columns</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">brown_passives_df</span>, <span class="va">passive</span>, <span class="va">n_w</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 15 × 2</span></span></span>
<span><span class="co">##    passive    n_w</span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     892 <span style="text-decoration: underline;">101</span>196</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     543  <span style="text-decoration: underline;">61</span>535</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     283  <span style="text-decoration: underline;">40</span>749</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     351  <span style="text-decoration: underline;">39</span>029</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     853  <span style="text-decoration: underline;">82</span>010</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>    <span style="text-decoration: underline;">1</span>034 <span style="text-decoration: underline;">110</span>363</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>    <span style="text-decoration: underline;">1</span>460 <span style="text-decoration: underline;">173</span>017</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     837  <span style="text-decoration: underline;">69</span>446</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>    <span style="text-decoration: underline;">2</span>423 <span style="text-decoration: underline;">181</span>426</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     352  <span style="text-decoration: underline;">68</span>599</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more rows</span></span></span></code></pre>
<p>Beyond selecting columns, we can also reorder columns and rename columns. For example, the following code block will select the <code>passive</code> and <code>n_w</code> columns, rename the <code>n_w</code> column to <code>num_words</code>, and reorder the columns so that <code>num_words</code> is the first column:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select rename and reorder columns</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>num_words <span class="op">=</span> <span class="va">n_w</span>, <span class="va">passive</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 15 × 2</span></span></span>
<span><span class="co">##    num_words passive</span></span>
<span><span class="co">##        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>    <span style="text-decoration: underline;">101</span>196     892</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     <span style="text-decoration: underline;">61</span>535     543</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     <span style="text-decoration: underline;">40</span>749     283</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     <span style="text-decoration: underline;">39</span>029     351</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     <span style="text-decoration: underline;">82</span>010     853</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>    <span style="text-decoration: underline;">110</span>363    <span style="text-decoration: underline;">1</span>034</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>    <span style="text-decoration: underline;">173</span>017    <span style="text-decoration: underline;">1</span>460</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     <span style="text-decoration: underline;">69</span>446     837</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>    <span style="text-decoration: underline;">181</span>426    <span style="text-decoration: underline;">2</span>423</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     <span style="text-decoration: underline;">68</span>599     352</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more rows</span></span></span></code></pre>
<div class="callout">
<p><strong><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0H133.9c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0H487.4C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"></path></svg> Dive deeper</strong></p>
<p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> also provides a number of helper functions to select columns. For example, we can use the <code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code> function inside the <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> call to select columns that start with a certain string. Or we can select columns by their vector type by using <code>where(is.character)</code>.</p>
<p>For more information, see the <a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select() documentation</a> or use the <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">?select</a></code> command in the R console.</p>
</div>
<p>By selecting some columns and not others, we have effectively dropped the columns we did not select. If it is more effective to drop columns by name, we can use the <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> function with the <code>-</code> operator. For example, the following code block will drop the <code>cat</code> column from the data frame:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Drop the `n_w` column</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">cat</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 15 × 4</span></span></span>
<span><span class="co">##    passive    n_w   n_s name            </span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     892 <span style="text-decoration: underline;">101</span>196  <span style="text-decoration: underline;">3</span>684 press reportage </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     543  <span style="text-decoration: underline;">61</span>535  <span style="text-decoration: underline;">2</span>399 press editorial </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     283  <span style="text-decoration: underline;">40</span>749  <span style="text-decoration: underline;">1</span>459 press reviews   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     351  <span style="text-decoration: underline;">39</span>029  <span style="text-decoration: underline;">1</span>372 religion        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     853  <span style="text-decoration: underline;">82</span>010  <span style="text-decoration: underline;">3</span>286 skills / hobbies</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>    <span style="text-decoration: underline;">1</span>034 <span style="text-decoration: underline;">110</span>363  <span style="text-decoration: underline;">4</span>387 popular lore    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>    <span style="text-decoration: underline;">1</span>460 <span style="text-decoration: underline;">173</span>017  <span style="text-decoration: underline;">6</span>537 belles lettres  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     837  <span style="text-decoration: underline;">69</span>446  <span style="text-decoration: underline;">2</span>012 miscellaneous   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>    <span style="text-decoration: underline;">2</span>423 <span style="text-decoration: underline;">181</span>426  <span style="text-decoration: underline;">6</span>311 learned         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     352  <span style="text-decoration: underline;">68</span>599  <span style="text-decoration: underline;">3</span>983 general fiction </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more rows</span></span></span></code></pre>
<p>Let's now turn our attention to subsetting rows. The <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> function allows us to select rows by a logical condition. For example, the following code block will select rows where the values of the <code>passive</code> column are less than <code>&lt;</code> 1,000:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select rows where `passive` is less than 1,000</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">passive</span> <span class="op">&lt;</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 12 × 5</span></span></span>
<span><span class="co">##    cat   passive    n_w   n_s name            </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> A         892 <span style="text-decoration: underline;">101</span>196  <span style="text-decoration: underline;">3</span>684 press reportage </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> B         543  <span style="text-decoration: underline;">61</span>535  <span style="text-decoration: underline;">2</span>399 press editorial </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> C         283  <span style="text-decoration: underline;">40</span>749  <span style="text-decoration: underline;">1</span>459 press reviews   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> D         351  <span style="text-decoration: underline;">39</span>029  <span style="text-decoration: underline;">1</span>372 religion        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> E         853  <span style="text-decoration: underline;">82</span>010  <span style="text-decoration: underline;">3</span>286 skills / hobbies</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> H         837  <span style="text-decoration: underline;">69</span>446  <span style="text-decoration: underline;">2</span>012 miscellaneous   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> K         352  <span style="text-decoration: underline;">68</span>599  <span style="text-decoration: underline;">3</span>983 general fiction </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> L         265  <span style="text-decoration: underline;">57</span>624  <span style="text-decoration: underline;">3</span>673 detective       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> M         104  <span style="text-decoration: underline;">14</span>433   873 science fiction </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> N         290  <span style="text-decoration: underline;">69</span>909  <span style="text-decoration: underline;">4</span>438 adventure       </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2 more rows</span></span></span></code></pre>
<p>We can also use the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> function to select rows by a character string. For example, the following code block will select rows where the values of the <code>name</code> column are equal to <code>religion</code>:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select rows where `name` is equal to `religion`</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"religion"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   cat   passive   n_w   n_s name    </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> D         351 <span style="text-decoration: underline;">39</span>029  <span style="text-decoration: underline;">1</span>372 religion</span></span></code></pre>
<p>The inequality operator <code>!=</code> can be used for character strings as well. To include multiple values, we can use the <code>%in%</code> operator. In this case we can pass a vector of values to the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> function. For example, the following code block will select rows where the values of the <code>name</code> column are equal to <code>religion</code> or <code>learned</code>:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select multiple values</span></span>
<span><span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"religion"</span>, <span class="st">"learned"</span>, <span class="st">"detective"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 5</span></span></span>
<span><span class="co">##   cat   passive    n_w   n_s name     </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> D         351  <span style="text-decoration: underline;">39</span>029  <span style="text-decoration: underline;">1</span>372 religion </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> J        <span style="text-decoration: underline;">2</span>423 <span style="text-decoration: underline;">181</span>426  <span style="text-decoration: underline;">6</span>311 learned  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> L         265  <span style="text-decoration: underline;">57</span>624  <span style="text-decoration: underline;">3</span>673 detective</span></span></code></pre>
<div class="callout">
<p><strong><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0H133.9c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0H487.4C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"></path></svg> Dive deeper</strong></p>
<p>For more sophisticated subsetting, we can use the <code><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect()</a></code> function from the <code>stringr</code> package to select rows where the values of the <code>name</code> column contain a certain string. This approach will be enhanced later in the course when we learn about <a href="https://en.wikipedia.org/wiki/Regular_expression" class="external-link">regular expressions</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="writing-data-to-a-file-with-readr">Writing data to a file with <code>readr</code><a class="anchor" aria-label="anchor" href="#writing-data-to-a-file-with-readr"></a>
</h3>
<p>Finally, we can write data, including data frames, to a file with the <code>write_*()</code> functions from the <code>readr</code> package. The <code>write_*()</code> functions include:</p>
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv()</a></code>: Write a data frame to a CSV file.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_tsv()</a></code>: Write a data frame to a TSV file.</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_delim()</a></code>: Write a data frame to a delimited file with the specified delimiter (<code>|</code>, <code>;</code>, <em>etc</em>).</li>
</ul>
<p>To create a distinct data frame from the one we read into R, let's subset our <code>brown_passives_df</code> data frame by columns and rows to create a new data frame that contains only the <code>passive</code>, <code>n_w</code>, and <code>name</code> columns and only the rows where the values of the <code>passive</code> column are greater than <code>&gt;</code> 1,000 and assign it to the <code>brown_passives_subset_df</code>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Subset the data frame</span></span>
<span><span class="va">brown_passives_subset_df</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">brown_passives_df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">passive</span>, <span class="va">n_w</span>, <span class="va">name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">passive</span> <span class="op">&gt;</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p>Now the following code block will write the <code>brown_passives_subset_df</code> data frame to a CSV file given the specified file path:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Write the data frame to a CSV file</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">brown_passives_subset_df</span>,</span>
<span>  file <span class="op">=</span> <span class="st">"../data/derived/brown_passives_subset.csv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Given the example directory structure we saw earlier, our new file appears in the <code>data/derived/</code> directory.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="ex">project/</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="ex">├──</span> data/</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="ex">│</span>   ├── original/</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="ex">│</span>   │   └── brown_passives_do.csv</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="ex">│</span>   └── derived/</span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="ex">│</span>       ├── brown_passives_curated.csv</span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="ex">│</span>       ├── brown_passives_curated_dd.csv</span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="ex">│</span>       └── brown_passives_subset.csv</span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="ex">└──</span> scripts/</span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a>    <span class="ex">└──</span> reading-inspecting-writing.qmd</span></code></pre></div>
<p>There is much more to learn about reading, inspecting, and writing data in R. We will introduce more functions and techniques in the coming lessons. For now, we have learned how to read, inspect, and write data using R functions and Quarto code blocks!</p>
</div>
</div>
<div class="section level2">
<h2 id="check-your-understanding">Check your understanding<a class="anchor" aria-label="anchor" href="#check-your-understanding"></a>
</h2>
<!-- T/F, Multiple choice, and fill-in-the-blank questions based on this Recipes material: reading, inspecting, and writing datasets -->
<ol style="list-style-type: decimal">
<li>
<select class="webex-select"><option value="blank"></option>
<option value="answer">TRUE</option>
<option value="">FALSE</option></select> The <code>readr</code> package provides functions to read rectangular data into R.</li>
<li>The <select class="webex-select"><option value="blank"></option>
<option value="answer">echo</option>
<option value="">message</option>
<option value="">include</option></select> option in a code block determines whether the code is displayed in the output document.</li>
<li>
<select class="webex-select"><option value="blank"></option>
<option value="">TRUE</option>
<option value="answer">FALSE</option></select> The <code>dplyr</code> package provides functions to create data dictionaries.</li>
<li>
<select class="webex-select"><option value="blank"></option>
<option value="">read_csv()</option>
<option value="answer">read_tsv()</option>
<option value="">read_delim()</option></select> is used to read tab-separated values (TSV) files.</li>
<li>Which function is in <code>dplyr</code> is used to select columns by name? <select class="webex-select"><option value="blank"></option>
<option value="answer">select()</option>
<option value="">filter()</option>
<option value="">slice_head()</option></select>
</li>
<li>
<select class="webex-select"><option value="blank"></option>
<option value="answer">TRUE</option>
<option value="">FALSE</option></select> The R pipe operator <code>|&gt;</code> allows us to chain the output of one function to the input of another function.</li>
</ol>
</div>
<div class="section level2">
<h2 id="lab-preparation">Lab preparation<a class="anchor" aria-label="anchor" href="#lab-preparation"></a>
</h2>
<!-- Provide a checklist of knowledge and skills that will be necessary to complete Lab 2 -->
<p>In Lab 2 you will have the opportunity to apply the skills you learned in this Recipe to create a Quarto document that reads, inspects, and writes data.</p>
<p>In addition to the knowledge and skills you have developed in Labs 0 and 1, to complete <a href="https://github.com/qtalr/lab-02" class="external-link">Lab 2</a>, you will need to be able to:</p>
<ul>
<li>Create code blocks in a Quarto document</li>
<li>Understand the purpose of the <code>label</code>, <code>echo</code>, <code>message</code>, and <code>include</code> options in a code block</li>
<li>Load packages into an R session with <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>
</li>
<li>Understand how to read and create file relative file paths</li>
<li>Read data into R with the <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv()</a></code> function</li>
<li>Inspect data frames with <code>dplyr</code> functions such as <code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code>.</li>
<li>Use the <code>|&gt;</code> pipe operator to chain functions together.</li>
<li>Subset data frames with <code>dplyr</code> functions such as <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>.</li>
<li>Write data frames to a file with the <code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv()</a></code> function.</li>
</ul>
</div>
<div class="section level2 unnumbered">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-R-corpora" class="csl-entry">
Evert, Stephanie. 2023. <em>Corpora: Statistics and Data Sets for Corpus Frequency Data</em>. <a href="http://SIGIL.R-Forge.R-Project.org/" class="external-link">http://SIGIL.R-Forge.R-Project.org/</a>.
</div>
<div id="ref-Francis1961" class="csl-entry">
Francis, W. Nelson, and Henry Kuçera. 1961. <span>“Brown Corpus of Present Day American English.”</span>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>

<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jerid Francom.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
